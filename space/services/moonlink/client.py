#!/usr/bin/env python3

import argparse
import binascii
import io
import sys

from prompt_toolkit import ANSI
from prompt_toolkit.application import Application
from prompt_toolkit.formatted_text import to_plain_text
from prompt_toolkit.key_binding import KeyBindings
from prompt_toolkit.layout import (
    FormattedTextControl,
    HSplit,
    Window,
    WindowAlign,
)
from prompt_toolkit.layout.layout import Layout
from prompt_toolkit.widgets import TextArea
from pwn import context, remote, log
from prompt_toolkit.key_binding.bindings.focus import focus_next, focus_previous

from mooncomms import *

my_token = "q2OqwwFOlZmkFrqNx0vmnK1HU5kqt9riibonek".encode()
usernaam = "kenobi"
my_token = f"q2OqwwFOlZmkFrqNx0vmnK1HU5kqt9ri{usernaam[::-1]}".encode()
my_token = bytes([c - my_token[i - 1] % 10 if i else c for i, c in enumerate(my_token)])
log_output = io.StringIO()
kb = KeyBindings()
rem = None

art = """
[107;40m[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;237m,[38;5;237m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;239m*[38;5;239m*[38;5;239m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;239m,[38;5;239m,[38;5;239m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;024m*[38;5;018m,[38;5;019m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;233m [38;5;234m.[38;5;235m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;239m,[38;5;239m,[38;5;239m,[38;5;016m [38;5;016m 
[38;5;088m,[38;5;124m*[38;5;167m/[38;5;167m/[38;5;167m/[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;234m [38;5;234m [38;5;234m [38;5;234m [38;5;234m [38;5;234m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;063m([38;5;026m*[38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;247m([38;5;247m([38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;247m#[38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;232m [38;5;235m.[38;5;241m*[38;5;243m/[38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;232m [38;5;233m [38;5;233m [38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;052m.[38;5;052m.[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;160m*[38;5;124m,[38;5;124m*[38;5;052m.[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;001m,[38;5;234m.[38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;238m,[38;5;238m,[38;5;061m*[38;5;025m*[38;5;018m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;235m.[38;5;239m,[38;5;102m([38;5;245m([38;5;242m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;246m([38;5;246m([38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;016m [38;5;016m [38;5;015m@[38;5;015m@[38;5;015m@[38;5;146m%[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;246m([38;5;246m([38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;235m.[38;5;102m([38;5;246m([38;5;246m([38;5;247m#[38;5;241m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;052m.[38;5;088m,[38;5;016m [38;5;246m([38;5;246m([38;5;246m([38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;088m,[38;5;088m,[38;5;052m.[38;5;052m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;237m,[38;5;243m/[38;5;247m#[38;5;248m#[38;5;248m#[38;5;248m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;245m([38;5;245m([38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;124m*[38;5;167m/[38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;233m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;167m/[38;5;167m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;236m.[38;5;060m/[38;5;247m#[38;5;145m#[38;5;250m%[38;5;249m%[38;5;249m%[38;5;240m*[38;5;016m [38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;017m,[38;5;017m.[38;5;236m.[38;5;235m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;241m*[38;5;241m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;052m.[38;5;052m,[38;5;088m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;088m,[38;5;233m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;088m,[38;5;052m.[38;5;052m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;234m.[38;5;237m,[38;5;103m([38;5;251m%[38;5;007m%[38;5;249m%[38;5;249m%[38;5;250m%[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;024m,[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;023m,[38;5;017m.[38;5;236m.[38;5;236m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;234m.[38;5;167m/[38;5;233m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;203m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;233m [38;5;124m*[38;5;167m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;233m [38;5;236m.[38;5;059m*[38;5;247m#[38;5;007m%[38;5;252m&[38;5;250m%[38;5;007m%[38;5;007m%[38;5;016m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;025m*[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;023m,[38;5;017m,[38;5;017m,[38;5;017m.[38;5;235m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;233m [38;5;088m,[38;5;001m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;203m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;237m,[38;5;237m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;234m.[38;5;088m,[38;5;052m.[38;5;052m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;238m,[38;5;239m*[38;5;060m/[38;5;102m([38;5;247m#[38;5;247m#[38;5;250m%[38;5;252m&[38;5;251m%[38;5;234m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;074m#[38;5;068m([38;5;068m([38;5;032m/[38;5;025m/[38;5;025m/[38;5;025m*[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;017m.[38;5;017m.[38;5;236m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;001m,[38;5;124m*[38;5;233m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;234m.[38;5;167m*[38;5;016m [38;5;016m [38;5;016m [38;5;234m [38;5;234m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;233m [38;5;167m*[38;5;160m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;234m [38;5;235m.[38;5;235m.[38;5;060m/[38;5;245m([38;5;103m([38;5;103m#[38;5;247m#[38;5;249m#[38;5;250m%[38;5;007m%[38;5;248m#[38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;153m&[38;5;153m&[38;5;153m&[38;5;117m%[38;5;116m%[38;5;074m#[38;5;074m#[38;5;068m([38;5;068m([38;5;032m/[38;5;025m/[38;5;025m/[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;023m,[38;5;017m,[38;5;017m.[38;5;017m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;236m.[38;5;167m/[38;5;237m,[38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;124m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;124m*[38;5;124m*[38;5;052m.[38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;235m.[38;5;234m.[38;5;236m.[38;5;239m,[38;5;246m([38;5;247m#[38;5;249m%[38;5;145m#[38;5;249m%[38;5;249m#[38;5;248m#[38;5;232m [38;5;016m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;189m@[38;5;189m@[38;5;195m@[38;5;189m@[38;5;189m&[38;5;153m&[38;5;153m&[38;5;117m&[38;5;117m%[38;5;117m%[38;5;116m%[38;5;074m#[38;5;074m#[38;5;068m([38;5;032m/[38;5;025m/[38;5;025m*[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m*[38;5;024m,[38;5;023m,[38;5;023m,[38;5;023m,[38;5;167m/[38;5;239m*[38;5;236m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;244m([38;5;244m([38;5;016m [38;5;016m [38;5;016m [38;5;203m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;244m([38;5;244m([38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;234m [38;5;234m.[38;5;167m*[38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;235m.[38;5;235m.[38;5;237m,[38;5;060m/[38;5;060m/[38;5;246m([38;5;248m#[38;5;247m#[38;5;247m#[38;5;247m#[38;5;246m([38;5;234m.[38;5;016m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;189m&[38;5;153m&[38;5;189m@[38;5;189m@[38;5;189m@[38;5;189m@[38;5;189m@[38;5;189m&[38;5;153m&[38;5;153m&[38;5;153m&[38;5;117m&[38;5;117m&[38;5;117m%[38;5;116m%[38;5;116m%[38;5;074m#[38;5;067m([38;5;238m,[38;5;240m*[38;5;067m/[38;5;025m*[38;5;060m*[38;5;131m/[38;5;060m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;017m.[38;5;017m.[38;5;235m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;203m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;124m*[38;5;088m,[38;5;052m.[38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;234m.[38;5;238m,[38;5;239m*[38;5;243m/[38;5;244m/[38;5;245m([38;5;102m([38;5;102m([38;5;242m/[38;5;235m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;117m%[38;5;153m&[38;5;153m&[38;5;117m&[38;5;153m&[38;5;153m&[38;5;153m&[38;5;189m@[38;5;153m&[38;5;153m&[38;5;117m&[38;5;153m&[38;5;153m&[38;5;153m&[38;5;153m&[38;5;117m%[38;5;117m%[38;5;237m,[38;5;061m*[38;5;110m#[38;5;167m/[38;5;103m([38;5;068m([38;5;031m/[38;5;025m/[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;017m.[38;5;017m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;052m.[38;5;124m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;234m.[38;5;124m*[38;5;124m*[38;5;232m [38;5;232m [38;5;233m [38;5;235m.[38;5;237m,[38;5;239m,[38;5;240m*[38;5;241m*[38;5;242m/[38;5;243m/[38;5;235m.[38;5;234m.[38;5;234m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m 
[38;5;117m%[38;5;081m%[38;5;081m#[38;5;081m%[38;5;081m%[38;5;117m%[38;5;117m%[38;5;117m%[38;5;153m&[38;5;153m&[38;5;117m%[38;5;153m&[38;5;153m&[38;5;117m%[38;5;117m%[38;5;117m&[38;5;239m*[38;5;060m*[38;5;061m/[38;5;116m%[38;5;117m%[38;5;117m%[38;5;116m%[38;5;116m%[38;5;074m#[38;5;074m([38;5;068m([38;5;031m/[38;5;025m/[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;017m,[38;5;017m.[38;5;017m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;124m*[38;5;016m [38;5;016m [38;5;233m [38;5;232m [38;5;233m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;232m [38;5;016m [38;5;232m [38;5;232m [38;5;232m [38;5;233m [38;5;234m.[38;5;234m.[38;5;124m*[38;5;124m*[38;5;240m*[38;5;237m,[38;5;234m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;233m [38;5;233m [38;5;234m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;116m%[38;5;074m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;081m#[38;5;081m#[38;5;075m%[38;5;117m%[38;5;117m%[38;5;081m%[38;5;117m%[38;5;189m&[38;5;117m&[38;5;081m%[38;5;068m([38;5;061m/[38;5;081m%[38;5;117m%[38;5;117m%[38;5;117m&[38;5;117m%[38;5;117m%[38;5;117m%[38;5;117m%[38;5;116m%[38;5;116m%[38;5;074m#[38;5;074m([38;5;068m([38;5;025m/[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;017m.[38;5;017m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;167m/[38;5;016m [38;5;024m,[38;5;004m.[38;5;024m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;234m.[38;5;001m,[38;5;124m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;004m,[38;5;019m,[38;5;237m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;117m%[38;5;117m&[38;5;189m@[38;5;015m@[38;5;015m@[38;5;255m@[38;5;253m&[38;5;081m%[38;5;131m*[38;5;167m/[38;5;138m#[38;5;110m#[38;5;110m#[38;5;110m#[38;5;110m#[38;5;110m#[38;5;110m#[38;5;117m%[38;5;117m%[38;5;116m%[38;5;074m#[38;5;074m#[38;5;068m([38;5;031m/[38;5;025m/[38;5;025m*[38;5;024m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;017m.[38;5;017m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;052m.[38;5;095m*[38;5;018m,[38;5;004m,[38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;235m.[38;5;235m.[38;5;235m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;235m.[38;5;235m.[38;5;235m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;124m*[38;5;052m.[38;5;234m.[38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;024m*[38;5;004m,[38;5;025m*[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;110m%[38;5;074m#[38;5;074m([38;5;074m([38;5;074m#[38;5;110m%[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;075m#[38;5;167m([38;5;103m#[38;5;117m%[38;5;195m@[38;5;195m@[38;5;153m&[38;5;117m%[38;5;251m%[38;5;109m#[38;5;109m#[38;5;109m#[38;5;109m#[38;5;131m/[38;5;160m*[38;5;160m*[38;5;160m*[38;5;124m*[38;5;167m/[38;5;167m/[38;5;167m/[38;5;167m/[38;5;131m/[38;5;131m/[38;5;131m*[38;5;095m*[38;5;060m/[38;5;025m/[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;017m,[38;5;017m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m.[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;019m,[38;5;027m/[38;5;235m.[38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;236m.[38;5;236m.[38;5;236m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;236m.[38;5;236m.[38;5;236m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;052m.[38;5;160m*[38;5;234m.[38;5;016m [38;5;233m [38;5;026m*[38;5;062m/[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;068m([38;5;068m([38;5;068m([38;5;074m#[38;5;152m%[38;5;074m([38;5;068m([38;5;074m#[38;5;074m#[38;5;067m([38;5;167m([38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;075m#[38;5;081m#[38;5;075m#[38;5;117m%[38;5;117m%[38;5;075m%[38;5;117m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;109m#[38;5;131m/[38;5;131m/[38;5;131m/[38;5;131m*[38;5;131m*[38;5;167m/[38;5;167m/[38;5;160m/[38;5;160m*[38;5;124m*[38;5;160m*[38;5;160m*[38;5;124m*[38;5;237m,[38;5;236m.[38;5;235m.[38;5;234m.[38;5;239m,[38;5;238m,[38;5;061m/[38;5;025m*[38;5;020m*[38;5;233m [38;5;232m [38;5;232m [38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;052m.[38;5;233m [38;5;016m [38;5;247m#[38;5;015m@[38;5;015m@[38;5;061m*[38;5;069m([38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;244m/[38;5;244m/[38;5;016m 
[38;5;067m([38;5;067m([38;5;067m([38;5;068m([38;5;074m#[38;5;074m([38;5;068m([38;5;131m/[38;5;103m([38;5;074m([38;5;074m([38;5;074m([38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;081m%[38;5;117m%[38;5;153m&[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;117m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;117m%[38;5;117m%[38;5;117m%[38;5;074m#[38;5;068m([38;5;032m/[38;5;025m/[38;5;025m*[38;5;024m*[38;5;239m*[38;5;239m,[38;5;238m,[38;5;237m,[38;5;236m.[38;5;235m.[38;5;015m@[38;5;015m@[38;5;015m@[38;5;249m%[38;5;236m.[38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;250m%[38;5;015m@[38;5;015m@[38;5;015m@[38;5;016m [38;5;016m [38;5;124m*[38;5;052m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[38;5;067m/[38;5;067m([38;5;067m/[38;5;067m([38;5;066m([38;5;167m/[38;5;067m([38;5;110m#[38;5;110m#[38;5;110m%[38;5;074m#[38;5;074m#[38;5;074m([38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;075m#[38;5;153m&[38;5;153m&[38;5;081m#[38;5;081m#[38;5;081m#[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;117m%[38;5;117m%[38;5;074m#[38;5;074m([38;5;068m([38;5;025m/[38;5;025m*[38;5;025m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;237m,[38;5;017m.[38;5;236m.[38;5;235m.[38;5;235m.[38;5;234m.[38;5;234m.[38;5;234m [38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;234m.[38;5;234m.[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;088m,[38;5;167m*[38;5;167m*[38;5;233m [38;5;233m 
[38;5;008m/[38;5;066m/[38;5;131m/[38;5;096m/[38;5;067m([38;5;109m#[38;5;067m([38;5;109m#[38;5;146m%[38;5;067m([38;5;073m#[38;5;110m#[38;5;074m#[38;5;068m([38;5;074m([38;5;074m([38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;074m#[38;5;110m%[38;5;074m#[38;5;074m#[38;5;074m#[38;5;075m#[38;5;075m#[38;5;081m%[38;5;153m&[38;5;075m#[38;5;081m#[38;5;081m#[38;5;081m#[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;081m%[38;5;117m%[38;5;117m%[38;5;074m#[38;5;068m([38;5;032m/[38;5;025m/[38;5;025m*[38;5;024m*[38;5;024m,[38;5;024m,[38;5;023m,[38;5;236m.[38;5;236m.[38;5;235m.[38;5;089m*[38;5;125m*[38;5;234m.[38;5;234m.[38;5;234m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;233m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;232m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;247m#[38;5;247m#[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;237m,[38;5;237m,[38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m [38;5;016m 
[0m"""

help = """
help 📘:             List available commands.

ping 🏓:             Get a pong from the service, it returns any data you passed along.
                     e.g.: `ping some data to pass along`

authenticate 🆔:     Authenticate yourself with a username and password. The resulting token will be saved by this client for the duration of the session.
                     e.g.: `authenticate bob somepassword`

user 👤:             Request details for a user by a given name.
                     NOTE: This endpoint will only reply for users that are authenticated for a management level user.
                     e.g.: `user Anton Matrovskovich`

satellites 🛰️:       Requests a list of all satellite names. This will be a long list!
                     e.g.: `sattellites`

status 🛰️:           Requests status details of a satellite by a given name.
                     NOTE: This endpoint can be used for all clients, but management will retrieve more data.
                     e.g.: `status "MOONLINK-0001/2020-111Z"`

user_export 💼:      Call for an export of users that match a given query.
                     Accepted keywords to search on: 'id', 'accuracy', 'satellite'
                     Accepted comparators to compare on: '=', '<', '<=', '>', '>=', '!='
                     Accepted values to compare to: any integer
                     e.g.: `user_export id < 1000`

satellite_export 💼: Call for an export of satellite status that match a given query.
                     Accepted keywords to search on: 'id', 'APO', 'PER', 'ANG', 'VEL', 'ALT', 'LAT', 'LON'
                     Accepted comparators to compare on: '=', '<', '<=', '>', '>=', '!='
                     Accepted values to compare to: any integer
                     e.g.: `satellite_export VEL > 27800`

fetch_export 🚚:     Fetch an export made earlier.
                     e.g.: `fetch_export tmpdpfcd7f0` 
"""

parser=argparse.ArgumentParser(
    description="Moonlink Client")
parser.add_argument('-v', action='store_true', default=False, help='Set verbosity to high')
parser.add_argument('--host', type=str, default="localhost", help='Location of the Moonlink service we try to connect to')
args=parser.parse_args()

hostname = args.host

input_field = TextArea(
    height=1,
    prompt="> ",
    style="class:input-field",
    multiline=False,
    wrap_lines=False,
    focusable=True,
    focus_on_click=True,
)

output_field = TextArea(style="class:output-field",
                        scrollbar=True,
                        focusable=True,
                        focus_on_click=True,
                        read_only=True)

art_window = Window(
    height=23,
    content=FormattedTextControl(ANSI(art)),
    align=WindowAlign.CENTER,
)

root_container = HSplit(
    [
        art_window,
        Window(
            height=1,
            content=FormattedTextControl("Moonlink Client 🌘🛰️📶 - Press CTRL+Q or CTRL+C to quit"),
            align=WindowAlign.CENTER,
        ),
        input_field,
        Window(height=1, char="=", style="class:line"),
        output_field,
    ]
)


@kb.add("c-c", eager=True)
@kb.add("c-q", eager=True)
def quit(event):
    try:
        rem.close()
    except Exception:  # noqa
        pass
    event.app.exit()

kb.add("tab")(focus_next)
kb.add("s-tab")(focus_previous)

def out(val):
    output_field.read_only = False
    output_field.buffer.cursor_position = 1000000  # always concat to the end
    output_field.buffer.insert_text(val)
    output_field.read_only = True

def print_log():
    log_output.seek(0)
    out(to_plain_text(ANSI(log_output.read())))
    log_output.seek(0)


def input_handler(buff):
    global my_token
    out(f"> {buff.text}\n")

    art_window.height = 0 # Collapse art splash

    inp = buff.text.strip()

    # Make a request and send it
    command, data = inp.strip().split(' ', 1) if ' ' in inp else (inp, None)
    if command.strip().lower() == 'ping':
        request = MoonlinkPingRequest(data)
    elif command.strip().lower() in ('authenticate', 'auth'):
        username, password = data.strip().split(' ', 1) if data and ' ' in data else (None, None)
        if not username or not password:
            out("Please provide a username and password")
            return
        request = MoonlinkAuthenticateRequest(username, password)
    elif command.strip().lower() in ('user', 'u'):
        request = MoonlinkUserRequest(data, my_token)
    elif command.strip().lower() in ('satellites', 'sa'):
        request = MoonlinkSatelliteRequest()
    elif command.strip().lower() in ('status', 'st'):
        request = MoonlinkStatusRequest(data, my_token)
    elif command.strip().lower() in ('user_export', 'export_user', 'eu', 'ue'):
        key, op, threshold = data.strip().split(' ', 2) if data and ' ' in data else (None, None, None)
        if not key or not op or not threshold:
            out("Please provide a key, operator and threshold")
            return
        request = MoonlinkUserExportRequest(key, op, threshold)
    elif command.strip().lower() in ('satellite_export', 'export_user', 'es', 'se'):
        key, op, threshold = data.strip().split(' ', 2) if data and ' ' in data else (None, None, None)
        if not key or not op or not threshold:
            out("Please provide a key, operator and threshold")
            return
        request = MoonlinkSatelliteExportRequest(key, op, threshold)
    elif command.strip().lower() in ('fetch_export', 'fe'):
        request = MoonlinkFetchExportRequest(data)
    elif command.strip().lower() in ('help', 'h'):
        out(help)
        return
    elif command.strip().lower() in ('quit', 'exit', 'q'):
        application.exit()
        return
    else:
        out(f"Command '{command}' is not known 😕\n")
        return

    rem.sendline(binascii.hexlify(request.dump()))

    # Receive response, deal with empty lines
    buf = b''
    while not buf.strip():
        buf = rem.recvline()

    print_log()
    try:
        inp = binascii.unhexlify(buf.strip())
        response = pickle.loads(inp)
        if hasattr(response, 'token'):
            my_token = response.token

        out(str(response) + '\n')

        if isinstance(response, MoonlinkFetchExportResponse):
            for record in response.file.split(","):
                out(record + '\n')
    except Exception as e:  # noqa
        if buf.startswith(b'Responding'):
            out(buf.decode())
            return
        log.warn(str(e))
        print_log()
    finally:
        rem.recvuntil(">")


input_field.accept_handler = input_handler

application = Application(
    layout=Layout(root_container, focused_element=input_field),
    key_bindings=kb,
    mouse_support=True,
    full_screen=True,
)


def init():
    out("🌙 Connected \n")

    rem.recvuntil(">")
    print_log()


if __name__ == "__main__":
    context.log_console = log_output
    context.encoding = 'ASCII'

    context.log_level = 'warn'
    args = sys.argv.pop()
    if args == '-v':
        context.log_level = 'debug'

    rem = remote(hostname, 3000)
    application.run(pre_run=init)

